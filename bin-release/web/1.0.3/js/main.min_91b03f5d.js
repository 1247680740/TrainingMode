var __reflect=this&&this.__reflect||function(t,e,a){t.__class__=e,a?a.push(e):a=[e],t.__types__=t.__types__?a.concat(t.__types__):a},__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);a.prototype=e.prototype,t.prototype=new a},ProtobufConfig=function(){function t(){}return t.TEMPLATE_USER_LOGIN="template_user_login",t}();__reflect(ProtobufConfig.prototype,"ProtobufConfig");var ResourceProxyBase=function(t){function e(e){void 0===e&&(e="");var a=t.call(this,e)||this;return a._dataMap=new Array,a._proxyName="",a._proxyName=e,a}return __extends(e,t),e.prototype.getData=function(){var t=RES.getRes(this._proxyName);return t},e}(puremvc.Proxy);__reflect(ResourceProxyBase.prototype,"ResourceProxyBase",["puremvc.IProxy","puremvc.INotifier"]);var BaseMediator=function(t){function e(e,a){void 0===e&&(e=""),void 0===a&&(a=null);var i=t.call(this,e,a)||this;return i.isInitialized=!1,i.isPopUp=!1,i.ui=null,i.w=0,i.h=0,i.w=GameConfig.curWidth(),i.h=GameConfig.curHeight(),i}return __extends(e,t),e.prototype.showUI=function(t,e,a,i,r,n){void 0===e&&(e=!1),void 0===a&&(a=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=!1),this.ui=t,this.beforShow(),this.initUI(),this.initData(),PopUpManager.addPopUp(t,e,a,i,r,n)},e.prototype.beforShow=function(){},e.prototype.initUI=function(){},e.prototype.initData=function(){},e.prototype.closePanel=function(t){void 0===t&&(t=0),PopUpManager.removePopUp(this.ui,t),this.destroy()},e.prototype.destroy=function(){},e.prototype.getIsPopUp=function(){return this.isPopUp},e.prototype.getIsInit=function(){return this.isInitialized},e.prototype.getWidth=function(){return this.ui.width},e.prototype.getHeight=function(){return this.ui.height},e}(puremvc.Mediator);__reflect(BaseMediator.prototype,"BaseMediator",["puremvc.IMediator","puremvc.INotifier"]);var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.loginPanel=new t.LoginPanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_LOGIN,NoficationConfig.CLOSE_LOGIN,EventConfig.Event_UPDATE_PLAYER]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_LOGIN:this.showUI(this.loginPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_LOGIN:this.closePanel(1);break;case EventConfig.Event_UPDATE_PLAYER:this.initList()}},a.prototype.initUI=function(){this.loginPanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backView,this),this.loginPanel.btn_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startXL,this)},a.prototype.initData=function(){this.initView()},a.prototype.initView=function(){this.resetViewData();var t={userId:0,userName:""};SocketManager.SocketProxy.getInstance().changeSendInfo(ProtobufConfig.TEMPLATE_USER_LOGIN,t)},a.prototype.resetViewData=function(){var t=qr.QRCode.create("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2f6fda11a4c4998f&redirect_uri=https%3A%2F%2Fbanma.yiji-sport.com%2Fwx%2FgetInfoByCode&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect",225,225,1,12,15539492);this.loginPanel.group_code1.addChild(t);var e=qr.QRCode.create("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2f6fda11a4c4998f&redirect_uri=https%3A%2F%2Fbanma.yiji-sport.com%2Fwx%2FgetInfoByCode&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect",230,230,1,12,15539492);this.loginPanel.group_code2.addChild(e);var a=qr.QRCode.create("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2f6fda11a4c4998f&redirect_uri=https%3A%2F%2Fbanma.yiji-sport.com%2Fwx%2FgetInfoByCode&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect",235,235,1,12,15539492);this.loginPanel.group_code3.addChild(a)},a.prototype.initList=function(){this.loginPanel.iconList1.resetListData(P.getGameDataProxy().getLeftPlayer()),this.loginPanel.iconList2.resetListData(P.getGameDataProxy().getCenterPlayer()),this.loginPanel.iconList3.resetListData(P.getGameDataProxy().getRightPlayer())},a.prototype.backView=function(){EffectUtils.playEffect(this.loginPanel.btn_back,2,this.sendNofiCation,1)},a.prototype.startXL=function(){EffectUtils.playEffect(this.loginPanel.btn_start,2,this.sendNofiCation,2)},a.prototype.sendNofiCation=function(e){switch(e){case 1:t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_LOGIN),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_HOME);break;case 2:t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_LOGIN),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_COUNTDOWN)}},a.NAME="LoginMediator",a}(BaseMediator);t.LoginMediator=e,__reflect(e.prototype,"game.LoginMediator")}(game||(game={}));var EventConfig=function(){function t(){}return t.Event_UPDATE_PLAYER="Event_UPDATE_PLAYER",t}();__reflect(EventConfig.prototype,"EventConfig");var GameConfig;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0}function a(){return document.body.clientHeight/document.body.clientWidth>1.32}function i(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function r(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function n(){return egret.MainContext.instance.stage}function o(){return egret.MainContext.instance.stage.stageWidth}function s(){return egret.MainContext.instance.stage.stageHeight}t.isOnLine=navigator.onLine,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.isWeiXin=e,t.isBigScreen=a,t.systemType=i,t.platformType=r,t.curStage=n,t.curWidth=o,t.curHeight=s}(GameConfig||(GameConfig={}));var GlobalData;!function(t){t.myName="banma",t.checkType=!0,t._curTimerGroup=1,t._curTimerTotalGroup=1,t._curTimerEveryGroup=0,t._curTaskLeftGroup=1,t._curTaskCenterGroup=1,t._curTaskRightGroup=1,t.l_curTaskTotalGroup=1,t.c_curTaskTotalGroup=1,t.r_curTaskTotalGroup=1,t.l_curTaskEveryGroup=0,t.c_curTaskEveryGroup=0,t.r_curTaskEveryGroup=0,t.curLeftPlayerVo=null,t.curCenterPlayerVo=null,t.curRightPlayerVo=null,t.timeOneData=45,t.timeTwoData=15,t.timeThreeData=3,t.taskOneData=5,t.taskTwoData=5,t.taskThreeData=2}(GlobalData||(GlobalData={}));var NoficationConfig=function(){function t(){}return t.CONNECT_SERVER_SUCCESS="CONNECT_SERVER_SUCCESS",t.SERVER_BACK_DATA="SERVER_BACK_DATA",t.OPEN_HOME="SceneNotify_OPEN_HOME",t.CLOSE_HOME="SceneNotify_CLOSE_HOME",t.OPEN_SETUP="SceneNotify_OPEN_SETUP",t.CLOSE_SETUP="SceneNotify_CLOSE_SETUP",t.OPEN_TEACH="SceneNotify_OPEN_TEACH",t.CLOSE_TEACH="SceneNotify_CLOSE_TEACH",t.OPEN_LOGIN="SceneNotify_OPEN_LOGIN",t.CLOSE_LOGIN="SceneNotify_CLOSE_LOGIN",t.OPEN_COUNTDOWN="SceneNotify_OPEN_COUNTDOWN",t.CLOSE_COUNTDOWN="SceneNotify_CLOSE_COUNTDOWN",t.OPEN_READY="SceneNotify_OPEN_READY",t.CLOSE_READY="SceneNotify_CLOSE_READY",t.OPEN_TIMETYPE="SceneNotify_OPEN_TIMETYPE",t.CLOSE_TIMETYPE="SceneNotify_CLOSE_TIMETYPE",t.SHOW_TIMETYPE="SceneNotify_SHOW_TIMETYPE",t.HIDE_TIMETYPE="SceneNotify_HIDE_TIMETYPE",t.OPEN_TASKTYPE="SceneNotify_OPEN_TASKTYPE",t.CLOSE_TASKTYPE="SceneNotify_CLOSE_TASKTYPE",t.SHOW_TASKTYPE="SceneNotify_SHOW_TASKTYPE",t.HIDE_TASKTYPE="SceneNotify_HIDE_TASKTYPE",t.OPEN_RESULT="SceneNotify_OPEN_RESULT",t.CLOSE_RESULT="SceneNotify_CLOSE_RESULT",t.OPEN_MAIN="MainNotify_OPEN_MAIN",t.CLOSE_MAIN="MainNotify_CLOSE_MAIN",t}();__reflect(NoficationConfig.prototype,"NoficationConfig");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,a){function i(i){e.call(a,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,function(t){i(t)},this)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.getInstance=function(){return null==this.instance&&(this.instance=new a),this.instance},a.prototype.initializeController=function(){e.prototype.initializeController.call(this),this.registerCommand(a.STARTUP,t.StartupCommand)},a.prototype.startUp=function(t){this.sendNotification(a.STARTUP,t),this.removeCommand(a.STARTUP)},a.STARTUP="startup",a}(puremvc.Facade);t.AppFacade=e,__reflect(e.prototype,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.execute=function(e){(new t.MainManager).register(),(new t.SceneManager).register(),(new t.Processor_100_1).register()},a}(puremvc.SimpleCommand);t.ControllerPrepCommand=e,__reflect(e.prototype,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.execute=function(t){this.facade.registerProxy(new TemplateProxy),this.facade.registerProxy(new GameProxy)},e}(puremvc.SimpleCommand);t.ModelPrepCommand=e,__reflect(e.prototype,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.initializeMacroCommand=function(){this.addSubCommand(t.ControllerPrepCommand),this.addSubCommand(t.ModelPrepCommand),this.addSubCommand(t.ViewPrepCommand)},a}(puremvc.MacroCommand);t.StartupCommand=e,__reflect(e.prototype,"game.StartupCommand")}(game||(game={}));var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.execute=function(e){GameLayerManager.gameLayer().panelLayer;this.facade.registerMediator(new t.ResultMediator),this.facade.registerMediator(new t.TaskTypeMediator),this.facade.registerMediator(new t.TimeTypeMediator),this.facade.registerMediator(new t.ReadyMediator),this.facade.registerMediator(new t.CountDownMediator),this.facade.registerMediator(new t.LoginMediator),this.facade.registerMediator(new t.SetUpMediator),this.facade.registerMediator(new t.TeachMediator),this.facade.registerMediator(new t.HomeCityMediator)},a}(puremvc.SimpleCommand);t.ViewPrepCommand=e,__reflect(e.prototype,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.register=function(){this.facade.registerCommand(ProtobufConfig.TEMPLATE_USER_LOGIN,e)},e.prototype.execute=function(t){var e=t.getBody();switch(t.getName()){case ProtobufConfig.TEMPLATE_USER_LOGIN:P.getGameDataProxy().setPlayerData(e)}},e.NAME=ProtobufConfig.TEMPLATE_USER_LOGIN,e}(puremvc.SimpleCommand);t.Processor_100_1=e,__reflect(e.prototype,"game.Processor_100_1",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var P;!function(t){function e(){return game.AppFacade.getInstance().retrieveProxy(TemplateProxy.NAME)}function a(){return game.AppFacade.getInstance().retrieveProxy(GameProxy.NAME)}t.getTemplateDataProxy=e,t.getGameDataProxy=a}(P||(P={}));var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e);new eui.Theme("resource/default.thm.json",this.stage);this.addChild(GameLayerManager.gameLayer()),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading",1),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName?(this.loadingView=new LoadingUI,GameLayerManager.gameLayer().addChild(this.loadingView),Global.showWaritPanel()):"preload"==t.groupName&&(Global.hideWaritPanel(),GameLayerManager.gameLayer().removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.connetServer(),this.createGameScene())},e.prototype.onResourceProgress=function(t){"preload"==t.groupName},e.prototype.connetServer=function(){SocketManager.SocketProxy.getInstance().connectServer("echo.websocket.org",80)},e.prototype.createGameScene=function(){game.AppFacade.getInstance().startUp(GameLayerManager.gameLayer()),game.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_HOME),this.removeEventListener(NoficationConfig.CONNECT_SERVER_SUCCESS,this.createGameScene,this)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var GameProxy=function(t){function e(){var a=t.call(this,e.NAME)||this;return a.leftPlayerArr=[],a.centerPlayerArr=[],a.rightPlayerArr=[],a.vo=new GameVO,a}return __extends(e,t),e.prototype.getGameName=function(){return this.vo||(this.vo=new GameVO),this.vo.gameName},e.prototype.setGameName=function(t){this.vo||(this.vo=new GameVO),this.vo.gameName=t},e.prototype.setPlayerData=function(t){this.leftPlayerArr=[],this.centerPlayerArr=[],this.rightPlayerArr=[];for(var e in t){var a=t[e];if(1==a.type){var i=new PlayerVO;i.playerIcon=a.icon,i.playerName=a.name,this.leftPlayerArr.push(i)}else if(2==a.type){var r=new PlayerVO;r.playerIcon=a.icon,r.playerName=a.name,this.centerPlayerArr.push(r)}else if(3==a.type){var n=new PlayerVO;n.playerIcon=a.icon,n.playerName=a.name,this.rightPlayerArr.push(n)}}this.sendNotification(EventConfig.Event_UPDATE_PLAYER)},e.prototype.setLeftPlayer=function(t){if(t)for(var e=0;e<this.leftPlayerArr.length;e++)if(this.leftPlayerArr[e].playerName==t.playerName){var a=this.leftPlayerArr[e];a.playerName=t.playerName,a.playerIcon=t.playerIcon,a.playNums=t.playNums,a.playEveryTimes=t.playEveryTimes,a.playTimes=t.playTimes}},e.prototype.getLeftPlayer=function(){return this.leftPlayerArr||(this.leftPlayerArr=[]),this.leftPlayerArr},e.prototype.setCenterPlayer=function(t){if(t)for(var e=0;e<this.centerPlayerArr.length;e++)if(this.centerPlayerArr[e].playerName==t.playerName){var a=this.centerPlayerArr[e];a.playerName=t.playerName,a.playerIcon=t.playerIcon,a.playNums=t.playNums,a.playEveryTimes=t.playEveryTimes,a.playTimes=t.playTimes}},e.prototype.getCenterPlayer=function(){return this.centerPlayerArr||(this.centerPlayerArr=[]),this.centerPlayerArr},e.prototype.setRightPlayer=function(t){if(t)for(var e=0;e<this.rightPlayerArr.length;e++)if(this.rightPlayerArr[e].playerName==t.playerName){var a=this.rightPlayerArr[e];a.playerName=t.playerName,a.playerIcon=t.playerIcon,a.playNums=t.playNums,a.playEveryTimes=t.playEveryTimes,a.playTimes=t.playTimes}},e.prototype.getRightPlayer=function(){return this.rightPlayerArr||(this.rightPlayerArr=[]),this.rightPlayerArr},e.NAME="GameProxy",e}(ResourceProxyBase);__reflect(GameProxy.prototype,"GameProxy");var TemplateProxy=function(t){function e(){return t.call(this,e.NAME)||this}return __extends(e,t),e.prototype.getGameData=function(){return this.getData()},e.NAME="template",e}(ResourceProxyBase);__reflect(TemplateProxy.prototype,"TemplateProxy");var GameVO=function(){function t(){this.gameName="Eger pro"}return t}();__reflect(GameVO.prototype,"GameVO");var PlayerVO=function(){function t(){this.playerName="",this.playerIcon="",this.playNums=0,this.playEveryTimes=0,this.playTimes=0}return t}();__reflect(PlayerVO.prototype,"PlayerVO");var GameLayerManager=function(t){function e(){var e=t.call(this)||this;return e.mainLayer=new eui.UILayer,e.sceneLayer=new eui.UILayer,e.panelLayer=new eui.UILayer,e.effectLayer=new eui.UILayer,e.maskLayer=new eui.UILayer,e.loadLayer=new eui.UILayer,e.init(),e}return __extends(e,t),e.gameLayer=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.init=function(){this.touchThrough=!0,this.mainLayer.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.mainLayer),this.addChild(this.sceneLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},e}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var game;!function(t){var e=function(e){function a(){return e.call(this)||this}return __extends(a,e),a.prototype.register=function(){this.facade.registerCommand(NoficationConfig.OPEN_MAIN,a),this.facade.registerCommand(NoficationConfig.CLOSE_MAIN,a)},a.prototype.execute=function(e){var a=(e.getBody(),GameLayerManager.gameLayer().mainLayer);switch(e.getName()){case NoficationConfig.OPEN_MAIN:null==this.mainUI&&(this.mainUI=new t.MainUI,a.addChild(this.mainUI));break;case NoficationConfig.CLOSE_MAIN:null!=this.mainUI&&(a.removeChild(this.mainUI),this.mainUI=null)}},a.NAME="MainManager",a}(puremvc.SimpleCommand);t.MainManager=e,__reflect(e.prototype,"game.MainManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.register=function(){},e.prototype.execute=function(t){t.getBody(),GameLayerManager.gameLayer().sceneLayer},e.NAME="SceneManager",e}(puremvc.SimpleCommand);t.SceneManager=e,__reflect(e.prototype,"game.SceneManager",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var CommonCutDown=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonCutDownSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){},e.prototype.setPlayerData=function(t){this.img_icon.source=RES.getRes(t.playerIcon),this.label_name.text=t.playerName},e.prototype.setCountTime=function(t){this.label_time.text=this.changeNum(t)},e.prototype.setStep=function(t,e){this.label_step.text="SET"+t+"/"+e},e.prototype.changeNum=function(t){return 10>t?"0"+t:t+""},e}(eui.Component);__reflect(CommonCutDown.prototype,"CommonCutDown",["eui.UIComponent","egret.DisplayObject"]);var CommonFinish=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonFinishSkin",e}return __extends(e,t),e.prototype.complete=function(){},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setPlayer=function(t){this.img_icon.source=RES.getRes(t.playerIcon),this.label_name.text=t.playerName,GlobalData.checkType?(this.label_tagType.text="完成次数",this.label_tagOne.text=Global.formatTime(t.playTimes,2),this.label_tagTwo.text=t.playNums+""):(this.label_tagType.text="完成时间",this.label_tagOne.text=t.playNums+"次",this.label_tagTwo.text=Global.formatTime(t.playTimes,2))},e}(eui.Component);__reflect(CommonFinish.prototype,"CommonFinish",["eui.UIComponent","egret.DisplayObject"]);var CommonGameForm=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonGameFormSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){},e.prototype.setPlayerData=function(t){this.gameIcon.setIcon(t.playerIcon)},e.prototype.setStep=function(t,e){this.gameIcon.setStep(t+"/"+e)},e.prototype.setTimeStr=function(t){this.gameIcon.setTimer(Global.formatTime(t,1))},e.prototype.setTouchNum=function(t,e){this.gameIcon.setTouchNum(t,e)},e.prototype.setTouchBg=function(t){this.img_gameTouch.source=RES.getRes(t)},e}(eui.Component);__reflect(CommonGameForm.prototype,"CommonGameForm",["eui.UIComponent","egret.DisplayObject"]);var CommonGameIcon=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonGameIconSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){console.log("load complete")},e.prototype.setIcon=function(t){t?this.icon.source=RES.getRes(t):this.icon.source=""},e.prototype.setTimeTouchNum=function(t){this.label_num.text=10>t?"0"+t:t+""},e.prototype.setTouchNum=function(t,e){var a=10>t?"0"+t:t+"",i=10>e?"0"+e:e+"";this.label_num.text=a+"/"+i},e.prototype.setTimer=function(t){this.label_time.text=t},e.prototype.setStep=function(t){this.label_step.text="SET "+t},e}(eui.Component);__reflect(CommonGameIcon.prototype,"CommonGameIcon",["eui.UIComponent","egret.DisplayObject"]);var ui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonIconSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){console.log("load complete")},e.prototype.setIconData=function(t){this.label_name.text=t.playerName,this.img_icon.source=RES.getRes(t.playerIcon)},e}(eui.Component);t.CommonIcon=e,__reflect(e.prototype,"ui.CommonIcon",["eui.UIComponent","egret.DisplayObject"])}(ui||(ui={}));var CommonList=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonListSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){this.tileLayout=new eui.TileLayout,this.tileLayout.horizontalGap=10,this.list_icon.layout=this.tileLayout,this.list_icon.itemRenderer=CommonListItem,this.list_icon.itemRendererSkinName="CommonListItemSkin",this.collection=this.list_icon.dataProvider,this.collection||(this.collection=new eui.ArrayCollection)},e.prototype.resetListData=function(t){this.collection.source=t,this.list_icon.dataProvider=this.collection,t.length<=3?(this.tileLayout.requestedColumnCount=t.length,this.tileLayout.requestedRowCount=1):(this.tileLayout.requestedColumnCount=3,this.tileLayout.requestedRowCount=2)},e}(eui.Component);__reflect(CommonList.prototype,"CommonList",["eui.UIComponent","egret.DisplayObject"]);var CommonListItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.img_icon.source=RES.getRes(this.data.playerIcon))},e}(eui.ItemRenderer);__reflect(CommonListItem.prototype,"CommonListItem");var CommonResultItem=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonResultItemSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){},e}(eui.Component);__reflect(CommonResultItem.prototype,"CommonResultItem",["eui.UIComponent","egret.DisplayObject"]);var ui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonSettingSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){},e.prototype.setBg=function(t){this.img_timeBg.source=RES.getRes(t[0]),this.img_timeTitleBg.source=RES.getRes(t[1]),this.item_top.setBgData(t[2],t[3]),this.item_center.setBgData(t[2],t[3]),this.item_bottom.setBgData(t[2],t[3]),this.item_top.setLabelData(t[4]),this.item_center.setLabelData(t[5]),this.item_bottom.setLabelData(t[6])},e.prototype.setTouch=function(t){this.item_top.btn_reduce.touchEnabled=t,this.item_center.btn_reduce.touchEnabled=t,this.item_bottom.btn_reduce.touchEnabled=t,this.item_top.btn_add.touchEnabled=t,this.item_center.btn_add.touchEnabled=t,this.item_bottom.btn_add.touchEnabled=t},e.prototype.setNumData=function(t,e,a){this.item_top.setNum(t),this.item_center.setNum(e),this.item_bottom.setNum(a)},e.prototype.setBtnName=function(t){this.item_top.setBtnName(t[0],t[1]),this.item_center.setBtnName(t[2],t[3]),this.item_bottom.setBtnName(t[4],t[5])},e}(eui.Component);t.CommonSetting=e,__reflect(e.prototype,"ui.CommonSetting",["eui.UIComponent","egret.DisplayObject"])}(ui||(ui={}));var ui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.complete,e),e.skinName="CommonSettingItemSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.complete=function(){this.btn_reduce.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reduce,this),this.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.add,this)},e.prototype.setBgData=function(t,e){this.btn_reduce.source=RES.getRes(t),this.btn_add.source=RES.getRes(e)},e.prototype.setLabelData=function(t){this.label_title.text=t},e.prototype.setNum=function(t){this.label_num.text=t},e.prototype.setBtnName=function(t,e){this.btn_reduce.name=t,this.btn_add.name=e},e.prototype.reduce=function(t){EffectUtils.playEffect(this.btn_reduce,3);var e=t.currentTarget.name;switch(e){case"cut1":if(GlobalData.timeOneData<=1)return;GlobalData.timeOneData-=1,this.label_num.text=GlobalData.timeOneData+'"';break;case"cut2":if(GlobalData.timeTwoData<=1)return;GlobalData.timeTwoData-=1,this.label_num.text=GlobalData.timeTwoData+'"';break;case"cut3":if(GlobalData.timeThreeData<=1)return;GlobalData.timeThreeData-=1,this.label_num.text=GlobalData.timeThreeData+"";break;case"cuta":if(GlobalData.taskOneData<=1)return;GlobalData.taskOneData-=1,this.label_num.text=GlobalData.taskOneData+"";break;case"cutb":if(GlobalData.taskTwoData<=1)return;GlobalData.taskTwoData-=1,this.label_num.text=GlobalData.taskTwoData+'"';break;case"cutc":if(GlobalData.taskThreeData<=1)return;GlobalData.taskThreeData-=1,this.label_num.text=GlobalData.taskThreeData+""}},e.prototype.add=function(t){EffectUtils.playEffect(this.btn_add,3);var e=t.currentTarget.name;switch(e){case"add1":GlobalData.timeOneData+=1,this.label_num.text=GlobalData.timeOneData+'"';break;case"add2":GlobalData.timeTwoData+=1,this.label_num.text=GlobalData.timeTwoData+'"';break;case"add3":GlobalData.timeThreeData+=1,this.label_num.text=GlobalData.timeThreeData+"";break;case"adda":GlobalData.taskOneData+=1,this.label_num.text=GlobalData.taskOneData+"";break;case"addb":GlobalData.taskTwoData+=1,this.label_num.text=GlobalData.taskTwoData+'"';break;case"addc":GlobalData.taskThreeData+=1,this.label_num.text=GlobalData.taskThreeData+""}},e}(eui.Component);t.CommonSettingItem=e,__reflect(e.prototype,"ui.CommonSettingItem",["eui.UIComponent","egret.DisplayObject"])}(ui||(ui={}));var WaitPanel=function(t){function e(e){void 0===e&&(e=1);var a=t.call(this)||this;return a.bg=new egret.Sprite,a.w=0,a.h=0,a.createView(),a}return __extends(e,t),e.prototype.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.bg.graphics.beginFill(0,.2),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill(),this.bg.width=this.w,this.bg.height=this.h,this.addChild(this.bg),this.touchEnabled=!0,this.waitImg=new egret.Bitmap,this.waitImg.texture=RES.getRes("loadingCircle_png"),this.addChild(this.waitImg),this.waitImg.x=this.w/2,this.waitImg.y=this.h/2,this.waitImg.anchorOffsetX=this.waitImg.width/2,this.waitImg.anchorOffsetY=this.waitImg.height/2,EffectUtils.rotationEffect(this.waitImg,1e3)},e}(egret.Sprite);__reflect(WaitPanel.prototype,"WaitPanel");var PopUpManager;!function(t){function e(t,e,a,i,r,n){if(void 0===e&&(e=!1),void 0===a&&(a=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=!1),!GameLayerManager.gameLayer().panelLayer.contains(t)){t.scaleX=1,t.scaleY=1,t.x=0,t.y=0,t.alpha=1,e&&(this.darkSprite=new egret.Sprite,this.darkSprite.graphics.clear(),this.darkSprite.graphics.beginFill(0,.3),this.darkSprite.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),this.darkSprite.graphics.endFill(),this.darkSprite.width=GameConfig.curWidth(),this.darkSprite.height=GameConfig.curHeight(),GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)||GameLayerManager.gameLayer().panelLayer.addChild(this.darkSprite),this.darkSprite.touchEnabled=!0,egret.Tween.get(this.darkSprite).to({alpha:1},150),this.darkSprite.visible=!0),GameLayerManager.gameLayer().panelLayer.addChild(t),GameConfig.curPanel=t,0!=a?(t.x=GameConfig.curWidth()/2-a/2,t.y=GameConfig.curHeight()/2-i/2):(a=t.width,i=t.height);var o=GameConfig.curWidth()/2-a/2,s=GameConfig.curHeight()/2-i/2;switch(r){case 0:break;case 1:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+a/4,t.y=t.y+i/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-a/4,y:t.y-i/4},300,egret.Ease.backOut);break;case 2:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+a/4,t.y=t.y+i/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-a/4,y:t.y-i/4},600,egret.Ease.elasticOut);break;case 3:n?(t.x=-a,egret.Tween.get(t).to({x:o},500,egret.Ease.cubicOut)):(t.x=-a,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case 4:n?(t.x=a,egret.Tween.get(t).to({x:o},500,egret.Ease.cubicOut)):(t.x=a,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case 5:n?(t.y=-i,egret.Tween.get(t).to({y:s},500,egret.Ease.cubicOut)):(t.y=-i,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut));break;case 6:n?(t.y=GameConfig.curHeight(),egret.Tween.get(t).to({y:s},500,egret.Ease.cubicOut)):(t.y=i,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut))}}}function a(t,e){void 0===e&&(e=0);var a=function(){GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)&&GameLayerManager.gameLayer().panelLayer.removeChild(this.darkSprite)};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(a,this),e){case 0:break;case 1:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.width/2,y:t.y+t.height/2},300);break;case 2:break;case 3:egret.Tween.get(t).to({x:t.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(t).to({x:-t.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(t).to({y:t.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(t).to({y:-t.height},500,egret.Ease.cubicOut)}var i=500;0==e&&(i=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(t)&&GameLayerManager.gameLayer().panelLayer.removeChild(t)
},this,i)}t.addPopUp=e,t.removePopUp=a}(PopUpManager||(PopUpManager={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.countTimeNum=20,r.timer=null,r.countPanel=new t.CountDownPanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_COUNTDOWN,NoficationConfig.CLOSE_COUNTDOWN]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_COUNTDOWN:this.showUI(this.countPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_COUNTDOWN:this.timer&&(this.timer.stop(),this.timer=null),this.countTimeNum=20,this.closePanel(1)}},a.prototype.initUI=function(){this.countPanel.label_tip.text="训练演示",this.countPanel.btn_pause.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pauseTime,this),this.countPanel.btn_skip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skip,this)},a.prototype.initData=function(){this.resetPlayerData(),this.initView(),this.countPanel.list_L.resetListData(P.getGameDataProxy().getLeftPlayer()),this.countPanel.list_C.resetListData(P.getGameDataProxy().getCenterPlayer()),this.countPanel.list_R.resetListData(P.getGameDataProxy().getRightPlayer())},a.prototype.closeButtonClick=function(t){this.timer&&(this.timer=null),this.countPanel.btn_pause.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pauseTime,this),this.countPanel.btn_skip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skip,this),this.closePanel(1)},a.prototype.resetPlayerData=function(){for(var t=P.getGameDataProxy().getLeftPlayer(),e=P.getGameDataProxy().getCenterPlayer(),a=P.getGameDataProxy().getRightPlayer(),i=0;i<t.length;i++){var r=t[i];GlobalData.checkType?(r.playNums=0,r.playTimes=GlobalData.timeOneData*GlobalData.timeThreeData):(r.playNums=GlobalData.taskOneData*GlobalData.taskThreeData,r.playTimes=0),P.getGameDataProxy().setLeftPlayer(r)}for(var i=0;i<e.length;i++){var n=e[i];GlobalData.checkType?(n.playNums=0,n.playTimes=GlobalData.timeOneData*GlobalData.timeThreeData):(n.playNums=GlobalData.taskOneData*GlobalData.taskThreeData,n.playTimes=0),P.getGameDataProxy().setLeftPlayer(n)}for(var i=0;i<a.length;i++){var o=a[i];GlobalData.checkType?(o.playNums=0,o.playTimes=GlobalData.timeOneData*GlobalData.timeThreeData):(o.playNums=GlobalData.taskOneData*GlobalData.taskThreeData,o.playTimes=0),P.getGameDataProxy().setLeftPlayer(o)}},a.prototype.initView=function(){var e=this;this.countPanel.label_time.text=this.countTimeNum+"",null==this.timer&&(this.timer=new egret.Timer(1e3)),this.timer.addEventListener(egret.TimerEvent.TIMER,function(a){return e.countTimeNum--,e.countTimeNum<0?(e.countTimeNum=20,e.timer.stop(),e.timer=null,t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_COUNTDOWN),void t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_READY)):void(e.countPanel.label_time.text=e.countTimeNum+"")},this),this.timer.start()},a.prototype.pauseTime=function(){this.timer.stop()},a.prototype.skip=function(){EffectUtils.playEffect(this.countPanel.btn_skip,2,this.sendNofication,1)},a.prototype.sendNofication=function(e){switch(e){case 1:t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_COUNTDOWN),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_READY)}},a.NAME="CountDownMediator",a}(BaseMediator);t.CountDownMediator=e,__reflect(e.prototype,"game.CountDownMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.homecityPanel=new t.HomeCity,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_HOME,NoficationConfig.CLOSE_HOME]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_HOME:this.showUI(this.homecityPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_HOME:this.closePanel(1)}},a.prototype.initUI=function(){this.homecityPanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.homecityPanel.label_fitness.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkFitness,this),this.homecityPanel.label_stay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkStay,this),this.homecityPanel.label_heart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkHeart,this),this.homecityPanel.label_power.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkPower,this),this.homecityPanel.btn_startXL.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startXL,this),this.homecityPanel.btn_startSetUp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startSetup,this),this.homecityPanel.btn_StartShow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startTeach,this)},a.prototype.initData=function(){},a.prototype.backHome=function(){EffectUtils.playEffect(this.homecityPanel.btn_back,2)},a.prototype.startXL=function(){EffectUtils.playEffect(this.homecityPanel.btn_startXL,2,this.sendNofigCation,1)},a.prototype.startSetup=function(){EffectUtils.playEffect(this.homecityPanel.btn_startSetUp,2,this.sendNofigCation,2)},a.prototype.startTeach=function(){EffectUtils.playEffect(this.homecityPanel.btn_StartShow,2,this.sendNofigCation,3)},a.prototype.checkFitness=function(){EffectUtils.playEffect(this.homecityPanel.label_fitness,1)},a.prototype.checkStay=function(){EffectUtils.playEffect(this.homecityPanel.label_stay,1)},a.prototype.checkHeart=function(){EffectUtils.playEffect(this.homecityPanel.label_heart,1)},a.prototype.checkPower=function(){EffectUtils.playEffect(this.homecityPanel.label_power,1)},a.prototype.sendNofigCation=function(e){switch(e){case 1:this.closeButtonClick(),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_LOGIN);break;case 2:this.closeButtonClick(),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_SETUP);break;case 3:this.closeButtonClick(),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_TEACH)}},a.prototype.closeButtonClick=function(){this.homecityPanel.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.homecityPanel.label_fitness.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkFitness,this),this.homecityPanel.label_stay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkStay,this),this.homecityPanel.label_heart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkHeart,this),this.homecityPanel.label_power.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkPower,this),this.homecityPanel.btn_startXL.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startXL,this),this.homecityPanel.btn_startSetUp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startSetup,this),this.homecityPanel.btn_StartShow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startTeach,this),this.closePanel(1)},a.NAME="HomeCityMediator",a}(BaseMediator);t.HomeCityMediator=e,__reflect(e.prototype,"game.HomeCityMediator")}(game||(game={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.w=0,e.h=0,e.createGameScene(),e}return __extends(e,t),e.prototype.createGameScene=function(){this.w=document.body.clientWidth,this.h=document.body.clientHeight,this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("bgImg_png"),this.addChild(this.bg),this.width=this.w,this.height=this.h,this.bg.width=this.w,this.bg.height=this.h},e}(eui.UILayer);__reflect(LoadingUI.prototype,"LoadingUI");var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.timer=null,r.countTimeNum=0,r.readyPanel=new t.ReadyPanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_READY,NoficationConfig.CLOSE_READY]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_READY:this.showUI(this.readyPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_READY:this.timer&&(this.timer.stop(),this.timer=null),this.countTimeNum=GlobalData.checkType?GlobalData.timeTwoData:GlobalData.taskTwoData,this.closePanel(1)}},a.prototype.initUI=function(){var t=Global.contrastArr();GlobalData.checkType?1==GlobalData._curTimerTotalGroup&&0==GlobalData._curTimerEveryGroup?(this.readyPanel.label_bottomTip.text="准备开始",this.readyPanel.label_tip.text="训练即将开始，请做好准备。"):(this.readyPanel.label_bottomTip.text="SET"+GlobalData._curTimerTotalGroup+"/"+GlobalData.timeThreeData*t,this.readyPanel.label_tip.text="请下一组做好准备"):(this.readyPanel.label_bottomTip.text="准备开始",this.readyPanel.label_tip.text="训练即将开始，请做好准备。"),this.readyPanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backView,this),this.readyPanel.btn_skip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.skip,this)},a.prototype.initData=function(){this.countTimeNum=GlobalData.checkType?GlobalData.timeTwoData:GlobalData.taskTwoData,this.initView()},a.prototype.closeButtonClick=function(t){this.timer&&(this.timer=null),this.readyPanel.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backView,this),this.readyPanel.btn_skip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.skip,this),this.closePanel(1)},a.prototype.initView=function(){var t=P.getGameDataProxy().getLeftPlayer(),e=P.getGameDataProxy().getCenterPlayer(),a=P.getGameDataProxy().getRightPlayer();GlobalData.checkType?(t[GlobalData._curTimerEveryGroup]?(this.readyPanel.icon_left.visible=!0,this.readyPanel.img_leftBye.visible=!1,this.readyPanel.icon_left.setIconData(t[GlobalData._curTimerEveryGroup]),GlobalData.curLeftPlayerVo=t[GlobalData._curTimerEveryGroup]):(this.readyPanel.icon_left.visible=!1,this.readyPanel.img_leftBye.visible=!0,GlobalData.curLeftPlayerVo=null),e[GlobalData._curTimerEveryGroup]?(this.readyPanel.icon_center.visible=!0,this.readyPanel.img_centerBye.visible=!1,this.readyPanel.icon_center.setIconData(e[GlobalData._curTimerEveryGroup]),GlobalData.curCenterPlayerVo=e[GlobalData._curTimerEveryGroup]):(this.readyPanel.icon_center.visible=!1,this.readyPanel.img_centerBye.visible=!0,GlobalData.curCenterPlayerVo=null),a[GlobalData._curTimerEveryGroup]?(this.readyPanel.icon_right.visible=!0,this.readyPanel.img_rightBye.visible=!1,this.readyPanel.icon_right.setIconData(a[GlobalData._curTimerEveryGroup]),GlobalData.curRightPlayerVo=a[GlobalData._curTimerEveryGroup]):(this.readyPanel.icon_right.visible=!1,this.readyPanel.img_rightBye.visible=!0,GlobalData.curRightPlayerVo=null)):(t[GlobalData.l_curTaskEveryGroup]?(this.readyPanel.icon_left.visible=!0,this.readyPanel.img_leftBye.visible=!1,this.readyPanel.icon_left.setIconData(t[GlobalData.l_curTaskEveryGroup]),GlobalData.curLeftPlayerVo=t[GlobalData.l_curTaskEveryGroup]):(this.readyPanel.icon_left.visible=!1,this.readyPanel.img_leftBye.visible=!0,GlobalData.curLeftPlayerVo=null),e[GlobalData.c_curTaskEveryGroup]?(this.readyPanel.icon_center.visible=!0,this.readyPanel.img_centerBye.visible=!1,this.readyPanel.icon_center.setIconData(e[GlobalData.c_curTaskEveryGroup]),GlobalData.curCenterPlayerVo=e[GlobalData.c_curTaskEveryGroup]):(this.readyPanel.icon_center.visible=!1,this.readyPanel.img_centerBye.visible=!0,GlobalData.curCenterPlayerVo=null),a[GlobalData.r_curTaskEveryGroup]?(this.readyPanel.icon_right.visible=!0,this.readyPanel.img_rightBye.visible=!1,this.readyPanel.icon_right.setIconData(a[GlobalData.r_curTaskEveryGroup]),GlobalData.curRightPlayerVo=a[GlobalData.r_curTaskEveryGroup]):(this.readyPanel.icon_right.visible=!1,this.readyPanel.img_rightBye.visible=!0,GlobalData.curRightPlayerVo=null)),this.initTime()},a.prototype.initTime=function(){var e=this;this.readyPanel.label_time.text=this.countTimeNum+"",null==this.timer&&(this.timer=new egret.Timer(1e3)),this.timer.addEventListener(egret.TimerEvent.TIMER,function(a){return e.countTimeNum--,e.countTimeNum<0?(e.countTimeNum=GlobalData.checkType?GlobalData.timeTwoData:GlobalData.taskTwoData,e.timer.stop(),e.timer=null,void(GlobalData.checkType?(t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_READY),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_TIMETYPE)):(t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_READY),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_TASKTYPE)))):void(e.readyPanel.label_time.text=e.countTimeNum+"")},this),this.timer.start()},a.prototype.backView=function(){EffectUtils.playEffect(this.readyPanel.btn_back,1,this.sendNofiCation,1)},a.prototype.skip=function(){EffectUtils.playEffect(this.readyPanel.btn_skip,1,this.sendNofiCation,2)},a.prototype.sendNofiCation=function(e){switch(e){case 1:t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_READY),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_COUNTDOWN);break;case 2:t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_READY),GlobalData.checkType?t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_TIMETYPE):t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_TASKTYPE)}},a.NAME="ReadyMediator",a}(BaseMediator);t.ReadyMediator=e,__reflect(e.prototype,"game.ReadyMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.totalArr=[],r.pageNums=0,r.pagesArr=[],r.resultPanel=new t.ResultPanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_RESULT,NoficationConfig.CLOSE_RESULT]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_RESULT:this.showUI(this.resultPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_RESULT:this.closePanel(1)}},a.prototype.initUI=function(){this.resultPanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backView,this),this.resultPanel.btn_next.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextPage,this),this.resultPanel.btn_pre.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prePage,this),this.resultPanel.btn_newChange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startNewPage,this)},a.prototype.initData=function(){this.totalArr=[],this.pagesArr=[];var t=P.getGameDataProxy().getLeftPlayer(),e=P.getGameDataProxy().getCenterPlayer(),a=P.getGameDataProxy().getRightPlayer();this.totalArr=this.totalArr.concat(t).concat(e).concat(a),this.pagesArr=RegUtils.checkArrInGroups(this.totalArr,10),this.pageNums=this.pagesArr.length},a.prototype.backView=function(){EffectUtils.playEffect(this.resultPanel.btn_back,2),this.resultPanel.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backView,this),this.resultPanel.btn_next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextPage,this),this.resultPanel.btn_pre.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.prePage,this),this.resultPanel.btn_newChange.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startNewPage,this),this.closePanel(1),GlobalData.checkType?t.AppFacade.getInstance().sendNotification(NoficationConfig.SHOW_TIMETYPE):t.AppFacade.getInstance().sendNotification(NoficationConfig.SHOW_TASKTYPE)},a.prototype.nextPage=function(){EffectUtils.playEffect(this.resultPanel.btn_next,2)},a.prototype.prePage=function(){EffectUtils.playEffect(this.resultPanel.btn_pre,2)},a.prototype.startNewPage=function(){EffectUtils.playEffect(this.resultPanel.btn_newChange,2)},a.NAME="ResultMediator",a}(BaseMediator);t.ResultMediator=e,__reflect(e.prototype,"game.ResultMediator")}(game||(game={}));var gameData={timeOneData:0,timeTwoData:0,timeThreeData:0,taskOneData:0,taskTwoData:0,taskThreeData:0},game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.checkTime=["checkTagBg_png","checkTimeTitle_png","checkReduce_png","checkAdd_png","训练时间","间歇时间","组数"],r.checkTask=["checkTagBg_png","checkTaskTitle_png","checkReduce_png","checkAdd_png","每组次数","间歇时间","每人组数"],r.noCheckTime=["nocheckTagBg_png","nocheckTimeTitle_png","nocheckReduce_png","nocheckAdd_png","训练时间","间歇时间","组数"],r.noCheckTask=["nocheckTagBg_png","nocheckTaskTitle_png","nocheckReduce_png","nocheckAdd_png","每组次数","间歇时间","每人组数"],r.setupPanel=new t.SetUpPanel,r.timeBtnNameArr=["cut1","add1","cut2","add2","cut3","add3"],r.taskBtnNameArr=["cuta","adda","cutb","addb","cutc","addc"],r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_SETUP,NoficationConfig.CLOSE_SETUP]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_SETUP:this.showUI(this.setupPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_SETUP:this.closePanel(1)}},a.prototype.initUI=function(){this.setupPanel.btn_save.addEventListener(egret.TouchEvent.TOUCH_TAP,this.saveData,this),this.setupPanel.btn_cancle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.back,this),this.setupPanel.btn_time.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkTimeTag,this),this.setupPanel.btn_task.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkTaskTag,this)},a.prototype.initData=function(){GlobalData.checkType=!0,this.initGameData(),this.judgeCheck(),this.resetData()},a.prototype.initGameData=function(){gameData.timeOneData=GlobalData.timeOneData,gameData.timeTwoData=GlobalData.timeTwoData,gameData.timeThreeData=GlobalData.timeThreeData,gameData.taskOneData=GlobalData.taskOneData,gameData.taskTwoData=GlobalData.taskTwoData,gameData.taskThreeData=GlobalData.taskThreeData},a.prototype.judgeCheck=function(){GlobalData.checkType?(this.setupPanel.btn_time.setBg(this.checkTime),this.setupPanel.btn_task.setBg(this.noCheckTask),this.setupPanel.btn_time.setTouch(!0),this.setupPanel.btn_task.setTouch(!1)):(this.setupPanel.btn_time.setBg(this.noCheckTime),this.setupPanel.btn_task.setBg(this.checkTask),this.setupPanel.btn_time.setTouch(!1),this.setupPanel.btn_task.setTouch(!0))},a.prototype.resetData=function(){this.setupPanel.btn_time.setBtnName(this.timeBtnNameArr),this.setupPanel.btn_task.setBtnName(this.taskBtnNameArr),this.setupPanel.btn_time.setNumData(GlobalData.timeOneData+'"',GlobalData.timeTwoData+'"',GlobalData.timeThreeData+""),this.setupPanel.btn_task.setNumData(GlobalData.taskOneData+"",GlobalData.taskTwoData+'"',GlobalData.taskThreeData+"")},a.prototype.saveData=function(){EffectUtils.playEffect(this.setupPanel.btn_save,2,this.sendNofiCation,1)},a.prototype.back=function(){EffectUtils.playEffect(this.setupPanel.btn_cancle,2,this.sendNofiCation,2)},a.prototype.checkTimeTag=function(){GlobalData.checkType||(GlobalData.checkType=!GlobalData.checkType,this.judgeCheck())},a.prototype.checkTaskTag=function(){0!=GlobalData.checkType&&(GlobalData.checkType=!GlobalData.checkType,this.judgeCheck())},a.prototype.sendNofiCation=function(e){switch(e){case 1:this.closeButtonClick(),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_HOME);break;case 2:GlobalData.timeOneData=gameData.timeOneData,GlobalData.timeTwoData=gameData.timeTwoData,GlobalData.timeThreeData=gameData.timeThreeData,GlobalData.taskOneData=gameData.taskOneData,GlobalData.taskTwoData=gameData.taskTwoData,GlobalData.taskThreeData=gameData.taskThreeData,this.closeButtonClick(),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_HOME)}},a.prototype.closeButtonClick=function(){this.setupPanel.btn_save.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.saveData,this),this.setupPanel.btn_cancle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.back,this),this.setupPanel.btn_time.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkTimeTag,this),this.setupPanel.btn_task.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.checkTaskTag,this),this.closePanel(1)},a.NAME="SetUpMediator",a}(BaseMediator);t.SetUpMediator=e,__reflect(e.prototype,"game.SetUpMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.shopPanel=new t.ShopPanel,r.isPlay1=!1,r.isPlay2=!1,r.isPlay3=!1,r.isPlay4=!1,r.isPlay5=!1,r.isPlay6=!1,r.isPlay7=!1,r.isPlay8=!1,r.isPlay9=!1,r.isPlay10=!1,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[]},a.prototype.handleNotification=function(t){t.getBody()},a.prototype.initUI=function(){this.shopPanel.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.shopPanel.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn1Click,this),this.shopPanel.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn2Click,this),this.shopPanel.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn3Click,this),this.shopPanel.btn4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn4Click,this),this.shopPanel.btn5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn5Click,this),this.shopPanel.btn6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn6Click,this),this.shopPanel.btn7.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn7Click,this),this.shopPanel.btn8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn8Click,this),this.shopPanel.btn9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn9Click,this),this.shopPanel.btn10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btn10Click,this)},a.prototype.initData=function(){},a.prototype.btn1Click=function(t){this.isPlay1?(EffectUtils.showTips("取消旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img1),this.isPlay1=!1):(EffectUtils.showTips("旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img1,1e3),this.isPlay1=!0)},a.prototype.btn2Click=function(t){this.isPlay2?(EffectUtils.showTips("取消中心旋转特效",5),EffectUtils.removeRotationEffect(this.shopPanel.img2),this.isPlay2=!1):(EffectUtils.showTips("中心旋转特效",5),EffectUtils.rotationEffect(this.shopPanel.img2,1e3),this.isPlay2=!0)},a.prototype.btn3Click=function(t){EffectUtils.showTips("闪烁特效",5),EffectUtils.blinkEffect(this.shopPanel.img3,1e3)},a.prototype.btn4Click=function(t){EffectUtils.showTips("抖动特效",5),EffectUtils.shakeObj(this.shopPanel.img4)},a.prototype.btn5Click=function(t){EffectUtils.showTips("按下弹大",5),EffectUtils.playEffect(this.shopPanel.img5,1)},a.prototype.btn6Click=function(t){EffectUtils.showTips("按下轻微弹大",5),EffectUtils.playEffect(this.shopPanel.img6,2)},a.prototype.btn7Click=function(t){EffectUtils.showTips("按下变小放开变大",5),EffectUtils.playEffect(this.shopPanel.img7,3)},a.prototype.btn8Click=function(t){this.isPlay8?EffectUtils.showTips("正在持续变大变小呢！",5):(this.isPlay8=!0,EffectUtils.showTips("持续变大变小",5),EffectUtils.playScaleEffect(this.shopPanel.img8))},a.prototype.btn9Click=function(t){this.isPlay9?EffectUtils.showTips("正在上下浮动呢！",5):(this.isPlay9=!0,EffectUtils.showTips("上下浮动特效",5),EffectUtils.flyObj(this.shopPanel.img9,1e3,15))},a.prototype.btn10Click=function(t){this.isPlay10?EffectUtils.showTips("正在摇头呢！",5):(this.isPlay10=!0,EffectUtils.showTips("摇头特效",5),EffectUtils.rockObj(this.shopPanel.img10,500))},a.prototype.closeButtonClick=function(t){this.closePanel(1)},a.NAME="ShopMediator",a}(BaseMediator);t.ShopMediator=e,__reflect(e.prototype,"game.ShopMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.leftTimer=null,r.centerTimer=null,r.rightTimer=null,r.l_addTimer=null,r.c_addTimer=null,r.r_addTimer=null,r.l_state=1,r.c_state=1,r.r_state=1,r.l_finish=!1,r.c_finish=!1,r.r_finish=!1,r.l_total=0,r.c_total=0,r.r_total=0,r.l_curTouchNum=0,r.c_curTouchNum=0,r.r_curTouchNum=0,r.l_curTime=0,r.c_curTime=0,r.r_curTime=0,r.taskTypePanel=new t.TaskTypePanel,r.cutLeftNum=0,r.cutCenterNum=0,r.cutRightNum=0,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_TASKTYPE,NoficationConfig.CLOSE_TASKTYPE,NoficationConfig.SHOW_TASKTYPE,NoficationConfig.HIDE_TASKTYPE]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_TASKTYPE:this.showUI(this.taskTypePanel,!1,0,0,6);break;case NoficationConfig.CLOSE_TASKTYPE:this.closePanel(1);break;case NoficationConfig.SHOW_TASKTYPE:this.showSelf();break;case NoficationConfig.HIDE_TASKTYPE:}},a.prototype.initUI=function(){var t=this;this.taskTypePanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.taskTypePanel.btn_result.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){EffectUtils.playEffect(t.taskTypePanel.btn_result,2,t.checkResult)},this),this.taskTypePanel.l_progress.img_gameTouch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateLeft,this),this.taskTypePanel.c_progress.img_gameTouch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateCenter,this),this.taskTypePanel.r_progress.img_gameTouch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.updateRight,this)},a.prototype.initData=function(){this.l_finish=!1,this.c_finish=!1,this.r_finish=!1,this.setTaskData(),this.judgeState("L"),this.judgeState("C"),this.judgeState("R"),this.fillLeftData(),this.fillCenterData(),this.fillRightData()},a.prototype.closeButtonClick=function(t){this.taskTypePanel.btn_back.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeButtonClick,this),this.taskTypePanel.l_progress.img_gameTouch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.updateLeft,this),this.taskTypePanel.c_progress.img_gameTouch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.updateCenter,this),this.taskTypePanel.r_progress.img_gameTouch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.updateRight,this),this.closePanel(1)},a.prototype.showSelf=function(){this.taskTypePanel.visible=!0},a.prototype.checkResult=function(e){this.taskTypePanel.visible=!1,this.l_finish&&this.c_finish&&this.r_finish&&t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_RESULT)},a.prototype.setTaskData=function(){Global.contrastArr();this.l_arr=P.getGameDataProxy().getLeftPlayer(),this.c_arr=P.getGameDataProxy().getCenterPlayer(),this.r_arr=P.getGameDataProxy().getRightPlayer(),GlobalData.curLeftPlayerVo=this.l_arr[GlobalData.l_curTaskEveryGroup],GlobalData.curCenterPlayerVo=this.c_arr[GlobalData.c_curTaskEveryGroup],GlobalData.curRightPlayerVo=this.r_arr[GlobalData.r_curTaskEveryGroup],this.l_total=this.l_arr.length*GlobalData.taskThreeData,this.c_total=this.c_arr.length*GlobalData.taskThreeData,this.r_total=this.r_arr.length*GlobalData.taskThreeData},a.prototype.judgeState=function(t){switch(t){case"L":GlobalData.curLeftPlayerVo?this.leftTimer?this.setStateChange(t,1):GlobalData.l_curTaskTotalGroup<=this.l_total?this.setStateChange(t,2):this.setStateChange(t,3):this.setStateChange(t,4);break;case"C":GlobalData.curCenterPlayerVo?this.centerTimer?this.setStateChange(t,1):GlobalData.c_curTaskTotalGroup<=this.c_total?this.setStateChange(t,2):this.setStateChange(t,3):this.setStateChange(t,4);break;case"R":GlobalData.curRightPlayerVo?this.rightTimer?this.setStateChange(t,1):GlobalData.r_curTaskTotalGroup<=this.r_total?this.setStateChange(t,2):this.setStateChange(t,3):this.setStateChange(t,4)}},a.prototype.setStateChange=function(t,e){switch(t){case"L":switch(this.l_state=e,e){case 1:this.taskTypePanel.l_prepara.visible=!0,this.taskTypePanel.l_progress.visible=!1,this.taskTypePanel.l_finish.visible=!1;break;case 2:this.taskTypePanel.l_prepara.visible=!1,this.taskTypePanel.l_progress.visible=!0,this.taskTypePanel.l_finish.visible=!1;break;case 3:this.taskTypePanel.l_prepara.visible=!1,this.taskTypePanel.l_progress.visible=!1,this.taskTypePanel.l_finish.visible=!0,this.l_finish=!0,this.judgeFinsh();break;case 4:this.taskTypePanel.l_prepara.visible=!1,this.taskTypePanel.l_progress.visible=!1,this.taskTypePanel.l_finish.visible=!1,this.l_finish=!0,this.judgeFinsh()}break;case"C":switch(this.c_state=e,e){case 1:this.taskTypePanel.c_prepara.visible=!0,this.taskTypePanel.c_progress.visible=!1,this.taskTypePanel.c_finish.visible=!1;break;case 2:this.taskTypePanel.c_prepara.visible=!1,this.taskTypePanel.c_progress.visible=!0,this.taskTypePanel.c_finish.visible=!1;break;case 3:this.taskTypePanel.c_prepara.visible=!1,this.taskTypePanel.c_progress.visible=!1,this.taskTypePanel.c_finish.visible=!0,this.c_finish=!0,this.judgeFinsh();break;case 4:this.taskTypePanel.c_prepara.visible=!1,this.taskTypePanel.c_progress.visible=!1,this.taskTypePanel.c_finish.visible=!1,this.c_finish=!0,this.judgeFinsh()}break;case"R":switch(this.r_state=e,e){case 1:this.taskTypePanel.r_prepara.visible=!0,this.taskTypePanel.r_progress.visible=!1,this.taskTypePanel.r_finish.visible=!1;break;case 2:this.taskTypePanel.r_prepara.visible=!1,this.taskTypePanel.r_progress.visible=!0,this.taskTypePanel.r_finish.visible=!1;break;case 3:this.taskTypePanel.r_prepara.visible=!1,this.taskTypePanel.r_progress.visible=!1,this.taskTypePanel.r_finish.visible=!0,this.r_finish=!0,this.judgeFinsh();break;case 4:this.taskTypePanel.r_prepara.visible=!1,this.taskTypePanel.r_progress.visible=!1,this.taskTypePanel.r_finish.visible=!1,this.r_finish=!0,this.judgeFinsh()}}},a.prototype.judgeFinsh=function(){this.l_finish&&this.c_finish&&this.r_finish?this.taskTypePanel.btn_result.visible=!0:this.taskTypePanel.btn_result.visible=!1},a.prototype.fillLeftData=function(){var t=this;switch(this.l_state){case 1:this.cutLeftNum=GlobalData.taskTwoData,this.taskTypePanel.l_prepara.setCountTime(this.cutLeftNum),this.taskTypePanel.l_prepara.setPlayerData(GlobalData.curLeftPlayerVo),this.taskTypePanel.l_prepara.setStep(GlobalData.l_curTaskTotalGroup,this.l_total),this.leftTimer&&(this.leftTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.cutLeftNum-=1,t.cutLeftNum<=0&&(t.leftTimer.stop(),t.leftTimer=null,t.cutLeftNum=0,t.judgeState("L"),t.fillLeftData()),t.taskTypePanel.l_prepara.setCountTime(t.cutLeftNum)},this),this.leftTimer.start());break;case 2:this.taskTypePanel.l_progress.setPlayerData(GlobalData.curLeftPlayerVo),this.taskTypePanel.l_progress.setStep(GlobalData.l_curTaskTotalGroup,this.l_total),this.taskTypePanel.l_progress.setTouchNum(this.l_curTouchNum,GlobalData.taskOneData),this.taskTypePanel.l_progress.setTimeStr(this.l_curTime),this.taskTypePanel.l_progress.setTouchBg("godWarBg_png"),this.l_addTimer||(this.l_addTimer=new egret.Timer(1e3),this.l_addTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.l_curTime+=1,t.taskTypePanel.l_progress.setTimeStr(t.l_curTime)},this)),this.l_addTimer.start();break;case 3:this.taskTypePanel.l_finish.setPlayer(GlobalData.curLeftPlayerVo)}},a.prototype.fillCenterData=function(){var t=this;switch(this.c_state){case 1:this.cutCenterNum=GlobalData.taskTwoData,this.taskTypePanel.c_prepara.setCountTime(this.cutCenterNum),this.taskTypePanel.c_prepara.setPlayerData(GlobalData.curCenterPlayerVo),this.taskTypePanel.c_prepara.setStep(GlobalData.c_curTaskTotalGroup,this.c_total),this.centerTimer&&(this.centerTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.cutCenterNum-=1,t.cutCenterNum<=0&&(t.centerTimer.stop(),t.centerTimer=null,t.cutCenterNum=0,t.judgeState("C"),t.fillCenterData()),t.taskTypePanel.c_prepara.setCountTime(t.cutCenterNum)},this),this.centerTimer.start());break;case 2:this.taskTypePanel.c_progress.setPlayerData(GlobalData.curCenterPlayerVo),this.taskTypePanel.c_progress.setStep(GlobalData.c_curTaskTotalGroup,this.c_total),this.taskTypePanel.c_progress.setTouchNum(this.c_curTouchNum,GlobalData.taskOneData),this.taskTypePanel.c_progress.setTimeStr(this.c_curTime),this.taskTypePanel.c_progress.setTouchBg("godWarBg_png"),this.c_addTimer||(this.c_addTimer=new egret.Timer(1e3),this.c_addTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.c_curTime+=1,t.taskTypePanel.c_progress.setTimeStr(t.c_curTime)},this)),this.c_addTimer.start();break;case 3:this.taskTypePanel.c_finish.setPlayer(GlobalData.curCenterPlayerVo)}},a.prototype.fillRightData=function(){var t=this;switch(this.r_state){case 1:this.cutRightNum=GlobalData.taskTwoData,this.taskTypePanel.r_prepara.setCountTime(this.cutRightNum),this.taskTypePanel.r_prepara.setPlayerData(GlobalData.curRightPlayerVo),this.taskTypePanel.r_prepara.setStep(GlobalData.r_curTaskTotalGroup,this.r_total),this.rightTimer&&(this.rightTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.cutRightNum-=1,t.cutRightNum<=0&&(t.rightTimer.stop(),t.rightTimer=null,t.cutRightNum=0,t.judgeState("R"),t.fillRightData()),t.taskTypePanel.r_prepara.setCountTime(t.cutRightNum)
},this),this.rightTimer.start());break;case 2:this.taskTypePanel.r_progress.setPlayerData(GlobalData.curRightPlayerVo),this.taskTypePanel.r_progress.setStep(GlobalData.r_curTaskTotalGroup,this.r_total),this.taskTypePanel.r_progress.setTouchNum(this.r_curTouchNum,GlobalData.taskOneData),this.taskTypePanel.r_progress.setTimeStr(this.r_curTime),this.taskTypePanel.r_progress.setTouchBg("godWarBg_png"),this.r_addTimer||(this.r_addTimer=new egret.Timer(1e3),this.r_addTimer.addEventListener(egret.TimerEvent.TIMER,function(){t.r_curTime+=1,t.taskTypePanel.r_progress.setTimeStr(t.r_curTime)},this)),this.r_addTimer.start();break;case 3:this.taskTypePanel.r_finish.setPlayer(GlobalData.curRightPlayerVo)}},a.prototype.updateLeft=function(t){return EffectUtils.playEffect(this.taskTypePanel.l_progress.img_gameTouch,3),this.l_curTouchNum+=1,this.taskTypePanel.l_progress.setTouchNum(this.l_curTouchNum,GlobalData.taskOneData),this.l_curTouchNum>=GlobalData.taskOneData?(this.l_addTimer.stop(),this.l_addTimer=null,this.l_curTouchNum=0,GlobalData.curLeftPlayerVo.playTimes+=this.l_curTime,P.getGameDataProxy().setLeftPlayer(GlobalData.curLeftPlayerVo),this.l_curTime=0,void(GlobalData.l_curTaskEveryGroup+1>=this.l_arr.length?GlobalData._curTaskLeftGroup+1>GlobalData.taskThreeData?(GlobalData._curTaskLeftGroup=1,GlobalData.l_curTaskTotalGroup=1,GlobalData.l_curTaskEveryGroup=0,console.log("进入完成界面"),this.setStateChange("L",3),this.fillLeftData()):(GlobalData._curTaskLeftGroup+=1,GlobalData.l_curTaskTotalGroup+=1,GlobalData.l_curTaskEveryGroup=0,console.log("进入准备界面"),this.leftTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("L"),this.fillLeftData()):(GlobalData.l_curTaskEveryGroup+=1,GlobalData.l_curTaskTotalGroup+=1,console.log("进入准备界面"),this.leftTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("L"),this.fillLeftData()))):void 0},a.prototype.updateCenter=function(t){EffectUtils.playEffect(this.taskTypePanel.c_progress.img_gameTouch,3),this.c_curTouchNum+=1,this.taskTypePanel.c_progress.setTouchNum(this.c_curTouchNum,GlobalData.taskOneData),this.c_curTouchNum>=GlobalData.taskOneData&&(this.c_addTimer.stop(),this.c_addTimer=null,this.c_curTouchNum=0,GlobalData.curCenterPlayerVo.playTimes+=this.c_curTime,P.getGameDataProxy().setCenterPlayer(GlobalData.curCenterPlayerVo),this.c_curTime=0,GlobalData.c_curTaskEveryGroup+1>=this.c_arr.length?GlobalData._curTaskCenterGroup+1>GlobalData.taskThreeData?(GlobalData._curTaskCenterGroup=1,GlobalData.c_curTaskTotalGroup=1,GlobalData.c_curTaskEveryGroup=0,console.log("进入完成界面"),this.setStateChange("C",3),this.fillCenterData()):(GlobalData._curTaskCenterGroup+=1,GlobalData.c_curTaskTotalGroup+=1,GlobalData.c_curTaskEveryGroup=0,console.log("进入准备界面"),this.centerTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("C"),this.fillCenterData()):(GlobalData.c_curTaskEveryGroup+=1,GlobalData.c_curTaskTotalGroup+=1,console.log("进入准备界面"),this.centerTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("C"),this.fillCenterData()))},a.prototype.updateRight=function(t){EffectUtils.playEffect(this.taskTypePanel.r_progress.img_gameTouch,3),this.r_curTouchNum+=1,this.taskTypePanel.r_progress.setTouchNum(this.r_curTouchNum,GlobalData.taskOneData),this.r_curTouchNum>=GlobalData.taskOneData&&(this.r_addTimer.stop(),this.r_addTimer=null,this.r_curTouchNum=0,GlobalData.curRightPlayerVo.playTimes+=this.r_curTime,P.getGameDataProxy().setRightPlayer(GlobalData.curRightPlayerVo),this.r_curTime=0,GlobalData.r_curTaskEveryGroup+1>=this.r_arr.length?GlobalData._curTaskRightGroup+1>GlobalData.taskThreeData?(GlobalData._curTaskRightGroup=1,GlobalData.r_curTaskTotalGroup=1,GlobalData.r_curTaskEveryGroup=0,console.log("进入完成界面"),this.setStateChange("R",3),this.fillRightData()):(GlobalData._curTaskRightGroup+=1,GlobalData.r_curTaskTotalGroup+=1,GlobalData.r_curTaskEveryGroup=0,console.log("进入准备界面"),this.rightTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("R"),this.fillRightData()):(GlobalData.r_curTaskEveryGroup+=1,GlobalData.r_curTaskTotalGroup+=1,console.log("进入准备界面"),this.rightTimer=new egret.Timer(1e3),this.setTaskData(),this.judgeState("R"),this.fillRightData()))},a.NAME="TaskTypeMediator",a}(BaseMediator);t.TaskTypeMediator=e,__reflect(e.prototype,"game.TaskTypeMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.teachPanel=new t.TeachPanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_TEACH,NoficationConfig.CLOSE_TEACH]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_TEACH:this.showUI(this.teachPanel,!1,0,0,6);break;case NoficationConfig.CLOSE_TEACH:this.closePanel(1)}},a.prototype.initUI=function(){var e=this;this.teachPanel.btn_back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.closePanel(1),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_HOME)},this)},a.prototype.initData=function(){},a.NAME="TeachMediator",a}(BaseMediator);t.TeachMediator=e,__reflect(e.prototype,"game.TeachMediator")}(game||(game={}));var game;!function(t){var e=function(e){function a(i){void 0===i&&(i=null);var r=e.call(this,a.NAME,i)||this;return r.timer=null,r.timerNum=0,r.timeTypePanel=new t.TimeTypePanel,r}return __extends(a,e),a.prototype.listNotificationInterests=function(){return[NoficationConfig.OPEN_TIMETYPE,NoficationConfig.CLOSE_TIMETYPE]},a.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case NoficationConfig.OPEN_TIMETYPE:this.showUI(this.timeTypePanel,!1,0,0,6);break;case NoficationConfig.CLOSE_TIMETYPE:this.closePanel(1)}},a.prototype.initUI=function(){},a.prototype.initData=function(){var e=this,a=Global.contrastArr();this.timerNum=GlobalData.timeOneData;var i=a*GlobalData.timeThreeData;this.timer||(this.timer=new egret.Timer(1e3)),this.timer.addEventListener(egret.TimerEvent.TIMER,function(i){return e.timerNum<=0?(e.timerNum=GlobalData.timeOneData,e.timer.stop(),e.timer=null,void(GlobalData._curTimerEveryGroup+1>=a?GlobalData._curTimerGroup+1>GlobalData.timeThreeData?(GlobalData._curTimerGroup=1,GlobalData._curTimerTotalGroup=1,GlobalData._curTimerEveryGroup=0,console.log("进入结算界面")):(GlobalData._curTimerGroup+=1,GlobalData._curTimerTotalGroup+=1,GlobalData._curTimerEveryGroup=0,t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_TIMETYPE),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_READY)):(GlobalData._curTimerEveryGroup+=1,GlobalData._curTimerTotalGroup+=1,t.AppFacade.getInstance().sendNotification(NoficationConfig.CLOSE_TIMETYPE),t.AppFacade.getInstance().sendNotification(NoficationConfig.OPEN_READY)))):(e.timerNum--,e.timeTypePanel.p_left.setTimer(Global.formatTime(e.timerNum,1)),e.timeTypePanel.p_center.setTimer(Global.formatTime(e.timerNum,1)),void e.timeTypePanel.p_right.setTimer(Global.formatTime(e.timerNum,1)))},this),this.timer.start(),this.timeTypePanel.p_left.setStep(GlobalData._curTimerTotalGroup+"/"+i),this.timeTypePanel.p_center.setStep(GlobalData._curTimerTotalGroup+"/"+i),this.timeTypePanel.p_right.setStep(GlobalData._curTimerTotalGroup+"/"+i),GlobalData.curLeftPlayerVo?(this.timeTypePanel.p_left.setIcon(GlobalData.curLeftPlayerVo.playerIcon),this.timeTypePanel.p_left.setTimeTouchNum(GlobalData.curLeftPlayerVo.playNums)):(this.timeTypePanel.p_left.setIcon(""),this.timeTypePanel.p_left.setTimeTouchNum(0)),GlobalData.curCenterPlayerVo?(this.timeTypePanel.p_center.setIcon(GlobalData.curCenterPlayerVo.playerIcon),this.timeTypePanel.p_center.setTimeTouchNum(GlobalData.curCenterPlayerVo.playNums)):(this.timeTypePanel.p_center.setIcon(""),this.timeTypePanel.p_center.setTimeTouchNum(0)),GlobalData.curRightPlayerVo?(this.timeTypePanel.p_right.setIcon(GlobalData.curRightPlayerVo.playerIcon),this.timeTypePanel.p_right.setTimeTouchNum(GlobalData.curRightPlayerVo.playNums)):(this.timeTypePanel.p_right.setIcon(""),this.timeTypePanel.p_right.setTimeTouchNum(0))},a.prototype.closeButtonClick=function(t){this.closePanel(1)},a.NAME="TimeTypeMediator",a}(BaseMediator);t.TimeTypeMediator=e,__reflect(e.prototype,"game.TimeTypeMediator")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="CountDownSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.CountDownPanel=e,__reflect(e.prototype,"game.CountDownPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="HomeCitySkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.HomeCity=e,__reflect(e.prototype,"game.HomeCity")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="LoginSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.LoginPanel=e,__reflect(e.prototype,"game.LoginPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="ReadySkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.ReadyPanel=e,__reflect(e.prototype,"game.ReadyPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="ResultSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.ResultPanel=e,__reflect(e.prototype,"game.ResultPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="SetUpSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.SetUpPanel=e,__reflect(e.prototype,"game.SetUpPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="src/core/view/panel/ui/ShopSkin.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.ShopPanel=e,__reflect(e.prototype,"game.ShopPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="TaskTypeSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.partRemoved=function(e,a){t.prototype.partRemoved.call(this,e,a)},e}(eui.Component);t.TaskTypePanel=e,__reflect(e.prototype,"game.TaskTypePanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="TeachSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e}(eui.Component);t.TeachPanel=e,__reflect(e.prototype,"game.TeachPanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.createCompleteEvent,e),e.skinName="TimeTypeSkin",e}return __extends(e,t),e.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.COMPLETE,this.createCompleteEvent,this)},e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.partRemoved=function(e,a){t.prototype.partRemoved.call(this,e,a)},e}(eui.Component);t.TimeTypePanel=e,__reflect(e.prototype,"game.TimeTypePanel")}(game||(game={}));var game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._pauseTime=0,e.skinName="src/core/view/scene/base/MainUISkin.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,a){t.prototype.partAdded.call(this,e,a)},e.prototype.loadVideo=function(){this._video=new egret.Video,this._video.width=1920,this._video.height=1080,this._video.poster="resource/images/test/posterfullscreen.jpg",this._video.load("resource/images/test/trailer.mp4"),this.addChild(this._video),this._video.addEventListener(egret.Event.COMPLETE,function(t){console.log("complete"),this.play()},this)},e.prototype.play=function(){this._video.play(this._pauseTime,!0),this._video.fullscreen=!0},e.prototype.stop=function(){this._video.pause()},e}(eui.Component);t.MainUI=e,__reflect(e.prototype,"game.MainUI")}(game||(game={}));var SocketManager;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.connectServer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=80),Global.showWaritPanel(),this.sock=new egret.WebSocket,this.sock.type="webSocketTypeBinary",this.sock.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.sock.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.sock.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.sock.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.sock.connect(t,e)},e.prototype.onSocketOpen=function(){Global.hideWaritPanel()},e.prototype.onReceiveMessage=function(){Global.hideWaritPanel();var t=new egret.ByteArray;this.sock.readBytes(t);var e=(t.readInt(),t.readShort(),new egret.ByteArray);t.readBytes(e);var a=dcodeIO.ProtoBuf.loadProto(RES.getRes(this.fileName+"_proto")),i=(a.build(this.reqName),{name:"template_login_player",data:{1:{type:1,icon:"testIcon_png",name:"测试Left1"},2:{type:1,icon:"testIcon_png",name:"测试Left2"},3:{type:1,icon:"testIcon_png",name:"测试Left3"},4:{type:2,icon:"testIcon_png",name:"测试Center1"},5:{type:2,icon:"testIcon_png",name:"测试Center2"},6:{type:2,icon:"testIcon_png",name:"测试Center3"},7:{type:2,icon:"testIcon_png",name:"测试Center4"},8:{type:3,icon:"testIcon_png",name:"测试Right1"}}}),r=(i.name,i.data);game.AppFacade.getInstance().sendNotification(this.fileName+"_"+this.reqName,r)},e.prototype.onSocketClose=function(){console.log("WebSocketClose")},e.prototype.onSocketError=function(){console.log("WebSocketError")},e.prototype.sendMessage=function(t,e,a){Global.showWaritPanel();var i=new egret.ByteArray;i.writeInt(t),i.writeShort(e),i.writeBytes(new egret.ByteArray(a)),this.sock.writeBytes(i)},e.prototype.changeSendInfo=function(t,e){if(-1!=t.indexOf("_")){this.fileName=t.substring(0,t.indexOf("_")),this.reqName=t.substring(t.indexOf("_")+1,t.length);var a=Global.getMessage(this.fileName,this.reqName),i=new a(e),r=i.toArrayBuffer();this.sendMessage(100,1,r)}},e}(egret.EventDispatcher);t.SocketProxy=e,__reflect(e.prototype,"SocketManager.SocketProxy")}(SocketManager||(SocketManager={}));var qr;!function(t){var e=function(){function e(e){this.mode=t.QRMode.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var a=0,i=this.data.length;i>a;a++){var r=[],n=this.data.charCodeAt(a);n>65536?(r[0]=240|(1835008&n)>>>18,r[1]=128|(258048&n)>>>12,r[2]=128|(4032&n)>>>6,r[3]=128|63&n):n>2048?(r[0]=224|(61440&n)>>>12,r[1]=128|(4032&n)>>>6,r[2]=128|63&n):n>128?(r[0]=192|(1984&n)>>>6,r[1]=128|63&n):r[0]=n,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return e.prototype.getLength=function(t){return this.parsedData.length},e.prototype.write=function(t){for(var e=0,a=this.parsedData.length;a>e;e++)t.put(this.parsedData[e],8)},e}();t.QR8bitByte=e,__reflect(e.prototype,"qr.QR8bitByte")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){this.buffer=[],this.length=0}return t.prototype.get=function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},t.prototype.put=function(t,e){for(var a=0;e>a;a++)this.putBit(1==(t>>>e-a-1&1))},t.prototype.getLengthInBits=function(){return this.length},t.prototype.putBit=function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++},t}();t.QRBitBuffer=e,__reflect(e.prototype,"qr.QRBitBuffer")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.create=function(a,i,r,n,o,s){void 0===i&&(i=200),void 0===r&&(r=200),void 0===n&&(n=t.QRErrorCorrectLevel.M),void 0===o&&(o=4),void 0===s&&(s=0);var l={color:s,width:i,height:r,correctLevel:n,typeNumer:o},c=new t.QRCodeModel(l.typeNumer,l.correctLevel);return c.addData(a),c.make(),e.draw(c,l)},e.draw=function(t,e){var a=new egret.Sprite,e=e,i=t.getModuleCount(),r=e.width/i,n=e.height/i,o=10;a.graphics.moveTo(-o,-o),a.graphics.beginFill(16777215),a.graphics.drawRect(-o,-o,e.width+2*o,e.height+2*o),a.graphics.endFill();for(var s=0;i>s;s++)for(var l=0;i>l;l++){var c=t.isDark(s,l);c&&(a.graphics.moveTo(l*r,s*n),a.graphics.beginFill(e.color),a.graphics.drawRect(l*r,s*n,r,n),a.graphics.endFill())}return a},e}();t.QRCode=e,__reflect(e.prototype,"qr.QRCode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}return e.prototype.addData=function(e){var a=new t.QR8bitByte(e);this.dataList.push(a),this.dataCache=null},e.prototype.isDark=function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},e.prototype.getModuleCount=function(){return this.moduleCount},e.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},e.prototype.makeImpl=function(t,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},e.prototype.setupPositionProbePattern=function(t,e){for(var a=-1;7>=a;a++)if(!(-1>=t+a||this.moduleCount<=t+a))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(a>=0&&6>=a&&(0==i||6==i)||i>=0&&6>=i&&(0==a||6==a)||a>=2&&4>=a&&i>=2&&4>=i?this.modules[t+a][e+i]=!0:this.modules[t+a][e+i]=!1)},e.prototype.getBestMaskPattern=function(){for(var e=0,a=0,i=0;8>i;i++){this.makeImpl(!0,i);var r=t.QRUtil.getLostPoint(this);(0==i||e>r)&&(e=r,a=i)}return a},e.prototype.createMovieClip=function(t,e,a){var i=t.createEmptyMovieClip(e,a),r=1;this.make();for(var n=0;n<this.modules.length;n++)for(var o=n*r,s=0;s<this.modules[n].length;s++){var l=s*r,c=this.modules[n][s];c&&(i.beginFill(0,100),i.moveTo(l,o),i.lineTo(l+r,o),i.lineTo(l+r,o+r),i.lineTo(l,o+r),i.endFill())}return i},e.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},e.prototype.setupPositionAdjustPattern=function(){for(var e=t.QRUtil.getPatternPosition(this.typeNumber),a=0;a<e.length;a++)for(var i=0;i<e.length;i++){var r=e[a],n=e[i];if(null==this.modules[r][n])for(var o=-2;2>=o;o++)for(var s=-2;2>=s;s++)-2==o||2==o||-2==s||2==s||0==o&&0==s?this.modules[r+o][n+s]=!0:this.modules[r+o][n+s]=!1}},e.prototype.setupTypeNumber=function(e){for(var a=t.QRUtil.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var r=!e&&1==(a>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=r}for(var i=0;18>i;i++){var r=!e&&1==(a>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=r}},e.prototype.setupTypeInfo=function(e,a){for(var i=this.errorCorrectLevel<<3|a,r=t.QRUtil.getBCHTypeInfo(i),n=0;15>n;n++){var o=!e&&1==(r>>n&1);6>n?this.modules[n][8]=o:8>n?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(var n=0;15>n;n++){var o=!e&&1==(r>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=o:9>n?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!e},e.prototype.mapData=function(e,a){for(var i=-1,r=this.moduleCount-1,n=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var l=0;2>l;l++)if(null==this.modules[r][s-l]){var c=!1;o<e.length&&(c=1==(e[o]>>>n&1));var h=t.QRUtil.getMask(a,r,s-l);h&&(c=!c),this.modules[r][s-l]=c,n--,-1==n&&(o++,n=7)}if(r+=i,0>r||this.moduleCount<=r){r-=i,i=-i;break}}},e.createData=function(a,i,r){for(var n=t.QRRSBlock.getRSBlocks(a,i),o=new t.QRBitBuffer,s=0;s<r.length;s++){var l=r[s];o.put(l.mode,4),o.put(l.getLength(),t.QRUtil.getLengthInBits(l.mode,a)),l.write(o)}for(var c=0,s=0;s<n.length;s++)c+=n[s].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c)&&(o.put(e.PAD0,8),!(o.getLengthInBits()>=8*c));)o.put(e.PAD1,8);return e.createBytes(o,n)},e.createBytes=function(e,a){for(var i=0,r=0,n=0,o=new Array(a.length),s=new Array(a.length),l=0;l<a.length;l++){var c=a[l].dataCount,h=a[l].totalCount-c;r=Math.max(r,c),n=Math.max(n,h),o[l]=new Array(c);for(var u=0;u<o[l].length;u++)o[l][u]=255&e.buffer[u+i];i+=c;var p=t.QRUtil.getErrorCorrectPolynomial(h),g=new t.QRPolynomial(o[l],p.getLength()-1),m=g.mod(p);s[l]=new Array(p.getLength()-1);for(var u=0;u<s[l].length;u++){var f=u+m.getLength()-s[l].length;s[l][u]=f>=0?m.get(f):0}}for(var d=0,u=0;u<a.length;u++)d+=a[u].totalCount;for(var y=new Array(d),T=0,u=0;r>u;u++)for(var l=0;l<a.length;l++)u<o[l].length&&(y[T++]=o[l][u]);for(var u=0;n>u;u++)for(var l=0;l<a.length;l++)u<s[l].length&&(y[T++]=s[l][u]);return y},e.PAD0=236,e.PAD1=17,e}();t.QRCodeModel=e,__reflect(e.prototype,"qr.QRCodeModel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.L=1,t.M=0,t.Q=3,t.H=2,t}();t.QRErrorCorrectLevel=e,__reflect(e.prototype,"qr.QRErrorCorrectLevel")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.PATTERN000=0,t.PATTERN001=1,t.PATTERN010=2,t.PATTERN011=3,t.PATTERN100=4,t.PATTERN101=5,t.PATTERN110=6,t.PATTERN111=7,t}();t.QRMaskPattern=e,__reflect(e.prototype,"qr.QRMaskPattern")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.glog=function(e){return t.isInit||t.init(),1>e&&console.log("错误:n="+e),t.LOG_TABLE[e]},t.gexp=function(e){for(t.isInit||t.init();0>e;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},t.init=function(){t.isInit=!0;for(var e=0;8>e;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;256>e;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;255>e;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e},t.EXP_TABLE=new Array(256),t.LOG_TABLE=new Array(256),t}();t.QRMath=e,__reflect(e.prototype,"qr.QRMath")}(qr||(qr={}));var qr;!function(t){var e=function(){function t(){}return t.MODE_NUMBER=1,t.MODE_ALPHA_NUM=2,t.MODE_8BIT_BYTE=4,t.MODE_KANJI=8,t}();t.QRMode=e,__reflect(e.prototype,"qr.QRMode")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var a=0;a<t.length&&0==t[a];)a++;this.num=new Array(t.length-a+e);for(var i=0;i<t.length-a;i++)this.num[i]=t[i+a]}return e.prototype.get=function(t){return this.num[t]},e.prototype.getLength=function(){return this.num.length},e.prototype.multiply=function(a){for(var i=new Array(this.getLength()+a.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<a.getLength();n++)i[r+n]^=t.QRMath.gexp(t.QRMath.glog(this.get(r))+t.QRMath.glog(a.get(n)));return new e(i,0)},e.prototype.mod=function(a){if(this.getLength()-a.getLength()<0)return this;for(var i=t.QRMath.glog(this.get(0))-t.QRMath.glog(a.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<a.getLength();n++)r[n]^=t.QRMath.gexp(t.QRMath.glog(a.get(n))+i);return new e(r,0).mod(a)},e}();t.QRPolynomial=e,__reflect(e.prototype,"qr.QRPolynomial")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(t,e){this.totalCount=t,this.dataCount=e}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,a){var i=e.getRsBlockTable(t,a);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+a);for(var r=i.length/3,n=[],o=0;r>o;o++)for(var s=i[3*o+0],l=i[3*o+1],c=i[3*o+2],h=0;s>h;h++)n.push(new e(l,c));return n},e.getRsBlockTable=function(a,i){switch(i){case t.QRErrorCorrectLevel.L:return e.RS_BLOCK_TABLE[4*(a-1)+0];case t.QRErrorCorrectLevel.M:return e.RS_BLOCK_TABLE[4*(a-1)+1];case t.QRErrorCorrectLevel.Q:return e.RS_BLOCK_TABLE[4*(a-1)+2];case t.QRErrorCorrectLevel.H:return e.RS_BLOCK_TABLE[4*(a-1)+3];default:return}},e}();t.QRRSBlock=e,__reflect(e.prototype,"qr.QRRSBlock")}(qr||(qr={}));var qr;!function(t){var e=function(){function e(){}return e.getBCHTypeInfo=function(t){for(var a=t<<10;e.getBCHDigit(a)-e.getBCHDigit(e.G15)>=0;)a^=e.G15<<e.getBCHDigit(a)-e.getBCHDigit(e.G15);return(t<<10|a)^e.G15_MASK},e.getBCHTypeNumber=function(t){for(var a=t<<12;e.getBCHDigit(a)-e.getBCHDigit(e.G18)>=0;)a^=e.G18<<e.getBCHDigit(a)-e.getBCHDigit(e.G18);return t<<12|a},e.getBCHDigit=function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},e.getPatternPosition=function(t){return e.PATTERN_POSITION_TABLE[t-1]},e.getMask=function(e,a,i){switch(e){case t.QRMaskPattern.PATTERN000:return(a+i)%2==0;case t.QRMaskPattern.PATTERN001:return a%2==0;case t.QRMaskPattern.PATTERN010:return i%3==0;case t.QRMaskPattern.PATTERN011:return(a+i)%3==0;case t.QRMaskPattern.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2==0;case t.QRMaskPattern.PATTERN101:return a*i%2+a*i%3==0;case t.QRMaskPattern.PATTERN110:return(a*i%2+a*i%3)%2==0;case t.QRMaskPattern.PATTERN111:return(a*i%3+(a+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},e.getErrorCorrectPolynomial=function(e){for(var a=new t.QRPolynomial([1],0),i=0;e>i;i++)a=a.multiply(new t.QRPolynomial([1,t.QRMath.gexp(i)],0));return a},e.getLengthInBits=function(e,a){if(a>=1&&10>a)switch(e){case t.QRMode.MODE_NUMBER:return 10;case t.QRMode.MODE_ALPHA_NUM:return 9;case t.QRMode.MODE_8BIT_BYTE:return 8;case t.QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>a)switch(e){case t.QRMode.MODE_NUMBER:return 12;case t.QRMode.MODE_ALPHA_NUM:return 11;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>a))throw new Error("type:"+a);switch(e){case t.QRMode.MODE_NUMBER:return 14;case t.QRMode.MODE_ALPHA_NUM:return 13;case t.QRMode.MODE_8BIT_BYTE:return 16;case t.QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},e.getLostPoint=function(t){for(var e=t.getModuleCount(),a=0,i=0;e>i;i++)for(var r=0;e>r;r++){for(var n=0,o=t.isDark(i,r),s=-1;1>=s;s++)if(!(0>i+s||i+s>=e))for(var l=-1;1>=l;l++)0>r+l||r+l>=e||(0!=s||0!=l)&&o==t.isDark(i+s,r+l)&&n++;n>5&&(a+=3+n-5)}for(var i=0;e-1>i;i++)for(var r=0;e-1>r;r++){var c=0;t.isDark(i,r)&&c++,t.isDark(i+1,r)&&c++,t.isDark(i,r+1)&&c++,t.isDark(i+1,r+1)&&c++,(0==c||4==c)&&(a+=3)}for(var i=0;e>i;i++)for(var r=0;e-6>r;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(a+=40);for(var r=0;e>r;r++)for(var i=0;e-6>i;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(a+=40);
for(var h=0,r=0;e>r;r++)for(var i=0;e>i;i++)t.isDark(i,r)&&h++;var u=Math.abs(100*h/e/e-50)/5;return a+=10*u},e.prototype.static_isSupportCanvas=function(){return"undefined"!=typeof CanvasRenderingContext2D},e._getTypeNumber=function(a,i){for(var r=1,n=e._getUTF8Length(a),o=0,s=e.QRCodeLimitLength.length;s>=o;o++){var l=0;switch(i){case t.QRErrorCorrectLevel.L:l=e.QRCodeLimitLength[o][0];break;case t.QRErrorCorrectLevel.M:l=e.QRCodeLimitLength[o][1];break;case t.QRErrorCorrectLevel.Q:l=e.QRCodeLimitLength[o][2];break;case t.QRErrorCorrectLevel.H:l=e.QRCodeLimitLength[o][3]}if(l>=n)break;r++}if(r>e.QRCodeLimitLength.length)throw new Error("Too long data");return r},e._getUTF8Length=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)},e.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e.G15=1335,e.G18=7973,e.G15_MASK=21522,e.QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],e}();t.QRUtil=e,__reflect(e.prototype,"qr.QRUtil")}(qr||(qr={}));var EffectUtils;!function(t){function e(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var a=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(a,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(a,this)}}function a(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function i(t,e){void 0===e&&(e=1e3),new BitmapBlink(t,e)}function r(t){var e=80,a=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:a},e)},this,5*e)}function n(t){void 0===t&&(t=1);var e=GameConfig.curPanel,a=40,i=e.x,r=e.y;1==t?(egret.Tween.get(e).to({x:e.x-10},a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},a)},this,2*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},a)},this,3*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},a)},this,4*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:i},a)},this,5*a)):(egret.Tween.get(e).to({x:e.x-10,y:e.y},a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20,y:e.y},a)},this,2*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+15},a)},this,3*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y-20},a)},this,4*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+10},a)},this,5*a),egret.setTimeout(function(){egret.Tween.get(e).to({x:i,y:r},a)},this,6*a))}function o(t,e,a){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===a&&(a=!1),e){case 1:TipsUtils.showTipsDownToUp(t,a);break;case 2:TipsUtils.showTipsLeftOrRight(t,a,!0);break;case 3:TipsUtils.showTipsLeftOrRight(t,a,!1);break;case 4:TipsUtils.showTipsFromCenter(t,a);break;case 5:TipsUtils.showTipsBigToSmall(t,a)}}function s(t,e,a,i){if(void 0===e&&(e=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var r=function(){this.isPlayEffectPlay=!1,a&&(i?a(i):a())},n=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(r,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},200,egret.Ease.backOut).call(r,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(r,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(n,this)}}function l(t){var e=function(){if(null!=t){var a=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(a,self)}};e()}function c(t,e,a){void 0===a&&(a=50);var i=function(){if(null!=t){var r=function(){egret.Tween.get(t).to({y:t.y-a},e).call(i,this)};egret.Tween.get(t).to({y:t.y+a},e).call(r,this)}};i()}function h(t,e,a){void 0===a&&(a=20);var i=function(){if(null!=t){var r=function(){egret.Tween.get(t).to({rotation:-a},e).call(i,this)};egret.Tween.get(t).to({rotation:a},e).call(r,this)}};i()}function u(t,e,a){void 0===e&&(e=""),void 0===a&&(a=200);for(var i=e.split(""),r=i.length,n=0;r>n;n++)egret.setTimeout(function(){t.appendText(i[Number(this)])},n,a*n)}t.rotationEffect=e,t.removeRotationEffect=a,t.blinkEffect=i,t.shakeObj=r,t.shakeScreen=n,t.showTips=o;t.playEffect=s,t.playScaleEffect=l,t.flyObj=c,t.rockObj=h,t.typerEffect=u}(EffectUtils||(EffectUtils={}));var Global;!function(t){function e(){t.waitPanel=new WaitPanel(1),GameLayerManager.gameLayer().maskLayer.removeChildren(),GameLayerManager.gameLayer().maskLayer.addChild(t.waitPanel)}function a(){null!=t.waitPanel&&GameLayerManager.gameLayer().maskLayer.contains(t.waitPanel)&&GameLayerManager.gameLayer().maskLayer.removeChild(t.waitPanel)}function i(t){var e=new egret.HtmlTextParser;return e.parser(t)}function r(e,a){return null==t.message&&(t.message=dcodeIO.ProtoBuf.loadProto(RES.getRes(e+"_proto"))),t.message.build(a)}function n(t){switch(t){case 0:return"零";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七";case 8:return"八";case 9:return"九";default:console.log("default case")}}function o(){var t=P.getGameDataProxy().getLeftPlayer().length,e=P.getGameDataProxy().getCenterPlayer().length,a=P.getGameDataProxy().getRightPlayer().length,i=Math.max(t,e,a);return i}function s(t,e){var a=0,i=0,r=0;t>60?(i=parseInt(t/60+""),r=parseInt(t%60+""),i>60&&(a=parseInt(i/60+""),i=parseInt(i%60+""))):r=t;var n=function(t){return 10>t>>0?"0"+t:t};if(1==e){var o=n(i)+"'"+n(r)+'"';return o}var o=n(a)+"'"+n(i)+'"'+n(r);return o}t.showWaritPanel=e,t.hideWaritPanel=a,t.getTextFlow=i,t.getMessage=r,t.getNumber=n,t.contrastArr=o,t.formatTime=s}(Global||(Global={}));var NativeApi;!function(t){function e(t,e){egret.localStorage.setItem(t,e)}function a(t){return egret.localStorage.getItem(t)}function i(t){egret.localStorage.removeItem(t)}function r(){egret.localStorage.clear()}function n(){}function o(){}function s(t){window.open("tel:"+t,"_self")}function l(t){window.open("sms:"+t,"_self")}function c(){return window.location.href}t.setLocalData=e,t.getLocalData=a,t.deleteLocalData=i,t.clearLocalData=r,t.getMic=n,t.getScreen=o,t.callPhone=s,t.sendMessage=l,t.getCurUrl=c,t.curAngle=parseInt(window.orientation+"")}(NativeApi||(NativeApi={}));var RegUtils;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function a(t){if(n(t))return!1;var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function i(t){var e="/^1[3|4|5|7|8][0-9]d{4,8}$/",a=new RegExp(e);return a.test(t)?!0:!1}function r(t){var e=/^[0][1-9]{2,3}-[0-9]{5,10}$/,a=/^[1-9]{1}[0-9]{5,8}$/,i="您输入的电话号码不正确!";return t.length>9?e.test(t)?!0:(alert(i),!1):a.test(t)?!0:(alert(i),!1)}function n(t){if(""==t)return!0;var e="^[ ]+$",a=new RegExp(e);return a.test(t)}function o(t){var e=/^[-]{0,1}[0-9]{1,}$/;return e.test(t)}function s(t){var e="^[0-9]+$",a=new RegExp(e);return-1!=t.search(a)?!0:!1}function l(t){var e="^[0-9]+[.][0-9]{0,3}$",a=new RegExp(e);return a.test(t)?!0:!1}function c(t,e){var a=" ",i=-1;if(0==e||1==e){for(;" "==a;)++i,a=t.substr(i,1);t=t.substring(i)}if(0==e||2==e){for(a=" ",i=t.length;" "==a;)--i,a=t.substr(i,1);t=t.substring(0,i+1)}return t}function h(t,e){for(var a=t.length,i=[],r=Math.ceil(a/e*1),n=0;r>n;){var o=a-n*e>=e?e:a-n*e,s=t.slice(n*e,n*e+o);i.push(s),n++}return i}t.checkEmail=e,t.isIP=a,t.checkMobile=i,t.checkPhone=r,t.isNull=n,t.isInteger=o,t.isNumber=s,t.isMoney=l,t.cTrim=c,t.checkArrInGroups=h}(RegUtils||(RegUtils={}));var TipsManager;!function(t){function e(t,e,a){void 0===e&&(e=""),void 0===a&&(a=0),null==this._dict&&(this._dict=[]),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),null==this._dict[t.hashCode]&&(this._dict[t.hashCode]=[],this._dict[t.hashCode].descStr=e,this._dict[t.hashCode].effectType=a)}function a(t){var e=t.currentTarget,a="",i=0;if(null==this._tips){null!=this._dict[e.hashCode]&&(a=this._dict[e.hashCode].descStr,i=this._dict[e.hashCode].effectType),this._tips=new TipsPanel(this._dict[e.hashCode].descStr),GameLayerManager.gameLayer().effectLayer.contains(this._tips)||GameLayerManager.gameLayer().effectLayer.addChild(this._tips);var r=e.parent.localToGlobal(e.x,e.y);switch(r.x=r.x+e.width/2,r.y=r.y-this._tips.getHeight(),r.x+this._tips.getWidth()>GameConfig.curWidth()?r.x=GameConfig.curWidth()-this._tips.getWidth():r.x<0&&(r.x=0),r.y+this._tips.getHeight()>GameConfig.curHeight()?r.y=GameConfig.curHeight()-this._tips.getHeight():r.y<0&&(r.y=0),this._tips.x=r.x,this._tips.y=r.y,i){case 0:this._tips.alpha=0,egret.Tween.get(this._tips).to({alpha:1},300);break;case 1:this._tips.alpha=0,this._tips.y+=this._tips.getHeight(),egret.Tween.get(this._tips).to({alpha:1,y:this._tips.y-this._tips.getHeight()},500,egret.Ease.backOut);break;case 2:this._tips.alpha=0,this._tips.x-=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x+this._tips.getWidth()},500,egret.Ease.backOut);break;case 3:this._tips.alpha=0,this._tips.x+=this._tips.getWidth(),egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x-this._tips.getWidth()},500,egret.Ease.backOut)}}}function i(t){t.currentTarget;if(null!=this._tips){var e=function(){GameLayerManager.gameLayer().effectLayer.contains(this._tips)&&(GameLayerManager.gameLayer().effectLayer.removeChild(this._tips),this._tips=null)};egret.Tween.get(this._tips).to({alpha:0},300).call(e,this)}}t.addTips=e,t.showTips=a,t.removeTips=i}(TipsManager||(TipsManager={}));var TipsPanel=function(t){function e(e){void 0===e&&(e="");var a=t.call(this)||this;return a.descStr="",a.descStr=e,a.initUI(),a}return __extends(e,t),e.prototype.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=RES.getRes("tipsBg_png"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=0,this.descTF.size=20,this.descTF.x=5,this.descTF.textAlign="center",this.descTF.text=this.descStr;var t=new egret.Rectangle(5,5,5,5);this.bg.scale9Grid=t,this.bg.width=this.descTF.width+10,this.bg.height=3*this.descTF.height,this.descTF.y=this.bg.height/2-this.descTF.height/2+2},e.prototype.getHeight=function(){return this.bg.height},e.prototype.getWidth=function(){return this.bg.width},e}(eui.Component);__reflect(TipsPanel.prototype,"TipsPanel");var BitmapBlink=function(t){function e(e,a,i){void 0===i&&(i=!0);var r=t.call(this)||this;return r._target=e,r._time=a,i&&r.start(),r}return __extends(e,t),e.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},e.prototype.runDown=function(t){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},e.prototype.runUp=function(t){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},e.prototype.checkOver=function(){var t=egret.getTimer();return t-this._currTime>=this._time?(this.destroy(),!0):!1},e.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},e}(egret.EventDispatcher);__reflect(BitmapBlink.prototype,"BitmapBlink");var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var a=new egret.TextField;a.size=24,a.y=GameConfig.curHeight()/2,e?a.textColor=GameConfig.TextColors.red:a.textColor=GameConfig.TextColors.green,a.alpha=0,a.text=t,a.strokeColor=0,a.x=GameConfig.curWidth()/2-a.width/2,a.stroke=2,a.bold=!0,a.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(a)||GameLayerManager.gameLayer().effectLayer.addChild(a);var i=function(){GameLayerManager.gameLayer().effectLayer.contains(a)&&(GameLayerManager.gameLayer().effectLayer.removeChild(a),a=null)},r=function(){egret.Tween.get(a).to({alpha:0},500).call(i,this)};a.visible=!0,egret.Tween.get(a).to({y:a.y-120,alpha:1},800,egret.Ease.backOut).call(r,this)}function a(t,e,a){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===a&&(a=!0);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,a?i.x=-i.width:i.x=GameConfig.curWidth(),i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i),a?egret.Tween.get(i).to({x:GameConfig.curWidth()/2-i.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(i).to({x:GameConfig.curWidth()/2-i.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){a?egret.Tween.get(i).to({x:i.x+100},500):egret.Tween.get(i).to({x:i.x-100},500)},this,300),egret.setTimeout(function(){a?egret.Tween.get(i).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(i).to({x:-i.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)},this,1100)}function i(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var a=new egret.TextField;a.size=24,a.y=GameConfig.curHeight()/2,e?a.textColor=GameConfig.TextColors.red:a.textColor=GameConfig.TextColors.green,a.alpha=0,a.text=t,a.strokeColor=0,a.x=GameConfig.curWidth()/2,a.stroke=2,a.bold=!0,a.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(a)||GameLayerManager.gameLayer().effectLayer.addChild(a),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.scaleX=0,a.scaleY=0;var i=function(){GameLayerManager.gameLayer().effectLayer.contains(a)&&(GameLayerManager.gameLayer().effectLayer.removeChild(a),a=null)};egret.Tween.get(a).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(a).to({alpha:0},500).call(i,this)},this,1e3)}function r(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var a=new egret.TextField;a.size=24,a.y=GameConfig.curHeight()/2,e?a.textColor=GameConfig.TextColors.red:a.textColor=GameConfig.TextColors.green,a.alpha=0,a.text=t,a.strokeColor=0,a.x=GameConfig.curWidth()/2,a.stroke=2,a.bold=!0,a.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(a)||GameLayerManager.gameLayer().effectLayer.addChild(a),a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.scaleX=4,a.scaleY=4;var i=function(){GameLayerManager.gameLayer().effectLayer.contains(a)&&(GameLayerManager.gameLayer().effectLayer.removeChild(a),a=null)};egret.Tween.get(a).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(a).to({alpha:0},500).call(i,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=a,t.showTipsFromCenter=i,t.showTipsBigToSmall=r}(TipsUtils||(TipsUtils={}));